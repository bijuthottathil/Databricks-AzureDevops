bundle:
  name: uc-demo-bundle

variables:
  catalog_name:
    type: string
  schema_name:
    type: string
  table_name:
    type: string
    default: demo_customers

resources:
  schemas:
    data_schema:
      name: ${var.schema_name}
      catalog_name: ${var.catalog_name}

  jobs:
    create_uc_objects_job:
      name: uc-demo-create-objects
      tasks:
        - task_key: run_notebook
          notebook_task:
            notebook_path: ./notebooks/create_table.py
            source: WORKSPACE
            base_parameters:
              CATALOG: ${var.catalog_name}
              SCHEMA: ${var.schema_name}
              TABLE: ${var.table_name}

      tags:
        env: ${bundle.target}
        owner: dataplatform

targets:
  dev:
    workspace:
      host: https://adb-3283024692776789.9.azuredatabricks.net/
      root_path: /Shared/bundles/${bundle.target}/${bundle.name}
    run_as:
      user_name: thottathil@bijusofthotmailcom.onmicrosoft.com
    variables:
      catalog_name: dev_catalog
      schema_name: bronze
      table_name: demo_customers
      source_linked_deployment: false

  qa:
    workspace:
      host: https://adb-506773690582597.17.azuredatabricks.net/
      root_path: /Shared/bundles/${bundle.target}/${bundle.name}
    run_as:
      user_name: thottathil@bijusofthotmailcom.onmicrosoft.com
    variables:
      catalog_name: qa_catalog
      schema_name: bronze
      table_name: demo_customers
